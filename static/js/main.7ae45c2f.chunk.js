(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(29)},27:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(14),i=n.n(a),l=(n(27),n(36)),d=n(37),c=n(35),s=n(17);const p=e=>{let{id:t,children:n,type:a,onMove:i,onDelete:d,onConnect:c,onRename:s}=e;const[{isDragging:p},m]=Object(l.a)(()=>({type:"box",item:{id:t,type:a},collect:e=>({isDragging:!!e.isDragging()})})),[u,b]=Object(r.useState)(!1),[g,y]=Object(r.useState)(n),h=()=>{""!==g.trim()&&(s(t,g),b(!1))};return o.a.createElement("div",{ref:m,style:{opacity:p?.5:1,cursor:"move",border:"1px solid #ccc",padding:"0.5rem",margin:"0.5rem",backgroundColor:"department"===a?"#e6f7ff":"division"===a?"#d4edda":"#fff1b8",display:"inline-block",width:"150px",textAlign:"center",position:"relative"}},u?o.a.createElement("input",{value:g,onChange:e=>y(e.target.value),onBlur:h,onKeyPress:e=>"Enter"===e.key&&h(),autoFocus:!0}):o.a.createElement("div",{onDoubleClick:()=>b(!0)},n),o.a.createElement("div",null,o.a.createElement("button",{onClick:()=>i("left"),style:{marginRight:"5px"}},"\u2190"),o.a.createElement("button",{onClick:()=>i("right"),style:{marginRight:"5px"}},"\u2192"),o.a.createElement("button",{onClick:d,style:{backgroundColor:"#ff4d4f",color:"white",border:"none",borderRadius:"4px",marginRight:"5px"}},"X"),o.a.createElement("button",{onClick:c,style:{backgroundColor:"#1890ff",color:"white",border:"none",borderRadius:"4px"}},"Connect")))},m=e=>{let{onDrop:t,children:n}=e;const a=Object(r.useRef)(null),[{isOver:i},l]=Object(d.a)(()=>({accept:"box",drop:(e,n)=>{const r=n.getClientOffset();r&&a.current&&t(e,r,a.current.getBoundingClientRect())},collect:e=>({isOver:!!e.isOver()})}));return l(a),o.a.createElement("div",{ref:a,style:{minHeight:"600px",border:"2px dashed #ccc",padding:"1rem",backgroundColor:i?"#f0f0f0":"white",position:"relative"}},n)},u=e=>{let{start:t,end:n}=e;return o.a.createElement("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"}},o.a.createElement("line",{x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"black",strokeWidth:"2"}))};var b=()=>{const[e,t]=Object(r.useState)([]),[n,a]=Object(r.useState)([]),[i,l]=Object(r.useState)(null),[d,b]=Object(r.useState)(null),[g,y]=Object(r.useState)([{id:"product-a",label:"Product A Division"},{id:"product-b",label:"Product B Division"}]),h=[{id:"board",type:"position",label:"Board"},{id:"ceo",type:"position",label:"CEO"},{id:"manager",type:"position",label:"Manager"},{id:"employee",type:"position",label:"Employee"},{id:"hr",type:"department",label:"HR Department"},{id:"finance",type:"department",label:"Finance Department"},{id:"marketing",type:"department",label:"Marketing Department"},{id:"sales",type:"department",label:"Sales Department"},{id:"logistics",type:"department",label:"Logistics Department"},{id:"accounting",type:"department",label:"Accounting Department"},{id:"it",type:"department",label:"IT Department"},...g.map(e=>({...e,type:"division"}))];Object(r.useEffect)(()=>{const e=e=>{console.error("Unhandled error:",e.error),b("An unexpected error occurred. Please check the console for details.")};return window.addEventListener("error",e),()=>window.removeEventListener("error",e)},[]);const f=(e,n)=>{t(t=>t.map(t=>t.id===e?{...t,label:n}:t)),y(t=>t.map(t=>t.id===e?{...t,label:n}:t))};return o.a.createElement(c.a,{backend:s.a},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{width:"30%",padding:"1rem",overflowY:"auto",maxHeight:"80vh"}},o.a.createElement("h3",{style:{fontWeight:"bold",marginBottom:"1rem"}},"Available Components"),h.map(e=>o.a.createElement(p,{key:e.id,id:e.id,type:e.type,onMove:()=>{},onDelete:()=>{},onConnect:()=>{},onRename:f},e.label)),o.a.createElement("button",{onClick:()=>{const e={id:`product-${String.fromCharCode(97+g.length)}`,label:`Product ${String.fromCharCode(65+g.length)} Division`};y(t=>[...t,e])},style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"#52c41a",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},"Add New Product/Division")),o.a.createElement("div",{style:{width:"70%",padding:"1rem"}},o.a.createElement("h3",{style:{fontWeight:"bold",marginBottom:"1rem"}},"Organizational Structure"),d&&o.a.createElement("div",{style:{color:"red",marginBottom:"1rem"}},d),o.a.createElement(m,{onDrop:(e,n,r)=>{try{if(!r)throw new Error("Drop zone coordinates not available");const a=160*Math.round((n.x-r.left)/160),i=80*Math.round((n.y-r.top)/80),l=`${e.id}-${Date.now()}`;t(t=>[...t,{...e,id:l,x:a,y:i}]),b(null)}catch(o){console.error("Error in handleDrop:",o),b("Failed to add item. Please try again.")}}},n.map((t,n)=>{const r=e.find(e=>e.id===t.start),a=e.find(e=>e.id===t.end);return r&&a?o.a.createElement(u,{key:n,start:{x:r.x+75,y:r.y+30},end:{x:a.x+75,y:a.y+30}}):null}),e.map(e=>o.a.createElement("div",{key:e.id,style:{position:"absolute",left:e.x,top:e.y}},o.a.createElement(p,{id:e.id,type:e.type,onMove:n=>((e,n)=>{try{t(t=>t.map(t=>t.id===e?{...t,x:t.x+("left"===n?-160:160)}:t)),b(null)}catch(r){console.error("Error in handleMove:",r),b("Failed to move item. Please try again.")}})(e.id,n),onDelete:()=>(e=>{t(t=>t.filter(t=>t.id!==e)),a(t=>t.filter(t=>t.start!==e&&t.end!==e))})(e.id),onConnect:()=>(e=>{i?(a(t=>[...t,{start:i,end:e}]),l(null)):l(e)})(e.id),onRename:f},e.label||e.id.split("-")[0])))),o.a.createElement("button",{onClick:()=>{t([]),a([]),l(null),b(null)},style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},"Reset Structure"))))};var g=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then(t=>{let{getCLS:n,getFID:r,getFCP:o,getLCP:a,getTTFB:i}=t;n(e),r(e),o(e),a(e),i(e)})};i.a.createRoot(document.getElementById("root")).render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b,null))),g()}},[[19,1,2]]]);
//# sourceMappingURL=main.7ae45c2f.chunk.js.map